{% extends "base_with_skewed_header.html" %}
{% load i18n widget_tweaks static socialaccount common_tags %}

{% block title %}{% blocktrans context 'page title (end user)' %}Bookelgouna | Sign Up{% endblocktrans %}{% endblock %}
{% block desc_meta_tag %}{% blocktrans context 'page description meta tag (end user)' %}signup page description metatag{% endblocktrans %}{% endblock %}
{% block fb_title %}{% blocktrans context "facebook page title (end user)" %}Sign up page facebook title{% endblocktrans %}{% endblock %}
{% block fb_desc_meta_tag %}{% blocktrans context "facebook page description (end user)" %}signup page facebook description{% endblocktrans %}{% endblock %}

{% block on_body_open %}{% providers_media_js %}{% endblock %}

{% block content %}
<div class="signupboard">
    <div class="signupboard-center reg-page">
        <form class="signup-form reg-user" method="post" action="{% url 'account_signup' %}">
            {% csrf_token %}
            <span class="signup-form__text">{% blocktrans %}Register and join us!{% endblocktrans %}</span><br>
            {% if form.non_field_errors %}
                <div class="non_field_errors">
                    {{ form.non_field_errors }}
                </div>
            {% endif %}
            <a href="{% provider_login_url "facebook" method="js_sdk" %}">
                <button class="signup-form__btn facebook" type="button">{% trans "sign up with facebook" %}</button>
            </a>
            <div class="signup-form__separator-main">
                <div class="signup-form__separator-r">
                    {{ form.email|add_class:"signup-form__input reg-user"|add_error_class:"error"|attr:"tabindex:1" }}
                    {% if form.email.errors %}
                        <span class="error">{{ form.email.errors.0 }}</span>
                    {% endif %}
                </div>
                {% get_country2prefix_dict as country2prefix %}
                <div class="signup-form__separator-l">
                    <div class="signup-form__select-country select-country-container reg-user">
                        <select id="{{ form.country.id }}" name="{{ form.country.name }}" tabindex="2"
                            class="signup-form__input-sm js-country-dropdown{% if form.country.errors %} error{% endif %}"
                            data-prev-phone-code="{{ country2prefix|lookup:form.country.value }}">
                            {% for code, name in form.fields.country.choices %}
                               <option value="{{code}}" data-phone-code="{{ country2prefix|lookup:code }}"
                                   {% if code == form.country.value %}selected="selected"{% endif %}>
                                   {{name}}
                               </option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>

            <div class="signup-form__separator-main">
{#        Phone and username fields positions here are exchanged to ensure correct browser autocomplete functionality #}
                <div class="signup-form__separator-l">
                    {% with WIDGET_ERROR_CLASS='error' %}
                        {% render_field form.phone class="signup-form__input-sm js-phone-field" placeholder=form.phone.label tabindex="4" %}
                    {% endwith %}
                    {% if form.phone.errors %}
                        <span class="error">{{ form.phone.errors.0|safe }}</span>
                    {% endif %}
                     <span class="tooltip absolute reg-user">
                        <span class="tooltip-icon">?</span>
                        <span class="tooltip-text">
                            {% blocktrans context "end user signup phone hint content" %}Phone number{% endblocktrans %}
                        </span>
                    </span>
                </div>
                <div class="signup-form__separator-r">
                    {{ form.username|add_class:"signup-form__input-sm"|add_error_class:"error"|attr:"tabindex:3" }}
                    {% if form.username.errors %}
                        <span class="error">{{ form.username.errors.0 }}</span>
                    {% endif %}
                </div>
            </div>

            <div class="signup-form__separator-main">
                {# password field values are not cleared intentionally #}
                <div class="signup-form__separator-r">
                    {% with WIDGET_ERROR_CLASS='error' value=form.password1.value|default:"" %}
                        {% render_field form.password1 class="signup-form__input-sm input-float" value=value tabindex="5" %}
                    {% endwith %}
                    {% if form.password1.errors %}
                        <span class="error">{{ form.password1.errors.0 }}</span>
                    {% endif %}
                </div>
                <div class="signup-form__separator-l">
                    {% with WIDGET_ERROR_CLASS='error' value=form.password2.value|default:"" %}
                        {% render_field form.password2 class="signup-form__input-sm input-float" placeholder=form.password2.label value=value tabindex="6" %}
                    {% endwith %}
                    {% if form.password2.errors %}
                        <span class="error">{{ form.password2.errors.0 }}</span>
                    {% endif %}
                </div>
            </div>

            {% if redirect_field_value %}
                <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}" />
            {% endif %}
            <div class="signup-form__checkbox terms-privacy">
                {{ form.agree|attr:"style:display:none" }}
                <label class="signup-form__checkbox-label" for="{{ form.agree.id_for_label }}">{% blocktrans context "end user signup agreement clause" with cls="signup-form__bluelink inline-popup" %}I agree to the bookelgouna.com <a class="{{ cls }}" href="#terms-popup">Terms and Conditions</a> and <a class="{{ cls }}" href="#privacy-popup">Privacy Policy</a>.{% endblocktrans %}
                {% if form.agree.errors %}
                    <span class="error">{{ form.agree.errors.0 }}</span>
                {% endif %}
                </label>
                <div id="terms-popup" class="white-popup-big mfp-hide">
                    {% include "core/includes/terms_block.html" %}
                </div>
                <div id="privacy-popup" class="white-popup-big mfp-hide">
                    {% include "core/includes/privacy_policy_block.html" %}
                </div>
                
            </div>
            <button class="signup-form__btn" type="submit" tabindex=7 >{% blocktrans %}Sign up{% endblocktrans %}</button>
        </form>
        <div class="signup-form__sidebox reg-user">
            <span class="owl-text-signup reg-user">{% blocktrans context "end user signup welcome header" %}End user signup form header{% endblocktrans %}</span><br>
            <div class="owl-text-signupsm reg-user">
                <div class="block-overflow">
                    <p>{% blocktrans context "end user signup welcome text" %}End user signup form text on the right-hand side of the slide.
                    End user signup form text on the right-hand side of the slide.{% endblocktrans %}</p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}



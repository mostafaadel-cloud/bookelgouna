{% extends 'base_for_business_owner.html' %}
{% load i18n widget_tweaks %}

{% block title %}{% blocktrans context 'page title (business owner)' %}Bookelgouna | Change Password{% endblocktrans %}{% endblock %}

{% block content %}
    <div class="ownercontentboard">
        <div class="ownercontentsidebox">
            <span class="owl-text-owner">{% if token_fail %}{% trans "Bad Token" %}{% else %}{% trans "Change Password" %}{% endif %}</span><br>
            <div class="owl-text-ownersm">
                {% if token_fail %}
                    {% url 'business_reset_password' as passwd_reset_url %}
                    <p>{% blocktrans %}The password reset link was invalid, possibly because it has already been used. Please request a <a class="form__mail" href="{{ passwd_reset_url }}">new password reset</a>.{% endblocktrans %}</p>
                {% else %}
                    {% if form %}
                        <form class="form__container" autocomplete="off" method="POST" action=".">
                            {% csrf_token %}
                            {% if form.non_field_errors %}
                                <div class="non_field_errors">
                                    {{ form.non_field_errors }}
                                </div>
                            {% endif %}
                            <div class="form__input-separator">
                                {% with WIDGET_ERROR_CLASS='error' %}
                                    {% render_field form.password1 class="form__input" placeholder=form.password1.label %}
                                {% endwith %}
                                {% if form.password1.errors %}
                                    <span class="error">{{ form.password1.errors.0 }}</span>
                                {% endif %}
                            </div>
                            <div class="form__input-separator">
                                {% with WIDGET_ERROR_CLASS='error' %}
                                    {% render_field form.password2 class="form__input" placeholder=form.password2.label %}
                                {% endwith %}
                                {% if form.password2.errors %}
                                    <span class="error">{{ form.password2.errors.0 }}</span>
                                {% endif %}
                            </div>
                            <button class="form__btn reset-pass-btn">{% trans "Change Password" %}</button>
                        </form>
                    {% else %}
                        <p>{% trans 'Your password is now changed.' %}</p>
                    {% endif %}
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}
